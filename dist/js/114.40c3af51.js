"use strict";(self["webpackChunksas_front"]=self["webpackChunksas_front"]||[]).push([[114],{1114:function(a,e,r){r.r(e),r.d(e,{default:function(){return z}});var t=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("v-app",{attrs:{id:"carteira-vendedor"}},[r("v-main",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md10:""}},[r("h1",{staticClass:"text-center text-color"},[a._v("GESTÃO CARTEIRA VENDEDOR")]),r("div",{staticClass:"pt-5"},[r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{color:"#C0C0C0"}},[r("v-card",{attrs:{color:"white"}},[r("v-card-text",[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("CADASTRAR CARTEIRA/VENDEDOR")]),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return a.cadastrar_carteira(a.carteira)}},model:{value:a.validCadastro,callback:function(e){a.validCadastro=e},expression:"validCadastro"}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"24"}},[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("Usuário")]),r("v-text-field",{attrs:{label:"ID Usuário",rules:a.regra_usuario,"single-line":"",solo:"",required:"",dense:"","background-color":"#e0e1dd"},model:{value:a.carteira.id,callback:function(e){a.$set(a.carteira,"id",e)},expression:"carteira.id"}})],1)],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"24"}},[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("Empresa")]),r("v-text-field",{attrs:{label:"CNPJ Empresa",rules:a.regra_empresa,"single-line":"",solo:"",required:"",dense:"","background-color":"#e0e1dd"},model:{value:a.carteira.cnpj,callback:function(e){a.$set(a.carteira,"cnpj",e)},expression:"carteira.cnpj"}})],1)],1),r("v-row",[r("v-col"),r("v-col"),r("v-col",[r("v-btn",{staticClass:"mr-4",attrs:{color:"primary",type:"submit",disabled:!a.validCadastro}},[a._v(" Salvar ")])],1)],1)],1)],1)],1)],1)],1)],1),r("v-col",[r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{color:"#C0C0C0"}},[r("v-card",{attrs:{color:"white"}},[r("v-card-text",[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("PESQUISAR CARTEIRA/VENDEDOR")]),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:a.pesquisar_carteira},model:{value:a.validPesquisa,callback:function(e){a.validPesquisa=e},expression:"validPesquisa"}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"24"}},[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("Usuário")]),r("v-text-field",{attrs:{label:"ID Usuário",rules:a.regra_usuario,"single-line":"",solo:"",required:"",dense:"","background-color":"#e0e1dd"},model:{value:a.carteira_usuario.id,callback:function(e){a.$set(a.carteira_usuario,"id",e)},expression:"carteira_usuario.id"}})],1)],1),r("v-row",[r("v-col"),r("v-col"),r("v-col",[r("v-btn",{staticClass:"mr-4",attrs:{color:"primary",type:"submit",disabled:!a.validPesquisa}},[a._v(" Pesquisar ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),r("v-col",[r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{color:"#C0C0C0"}},[r("v-card",{attrs:{color:"white"}},[r("v-card-text",[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("DELETAR CARTEIRA/VENDEDOR")]),r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:a.deletar_carteira},model:{value:a.validDeletar,callback:function(e){a.validDeletar=e},expression:"validDeletar"}},[r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"24"}},[r("span",{staticClass:"text-color",staticStyle:{"font-size":"18px"}},[a._v("CNPJ")]),r("v-text-field",{attrs:{label:"CNPJ",rules:a.regra_cnpj,"single-line":"",solo:"",required:"",dense:"","background-color":"#e0e1dd"},model:{value:a.carteira_deletar.cnpj,callback:function(e){a.$set(a.carteira_deletar,"cnpj",e)},expression:"carteira_deletar.cnpj"}})],1)],1),r("v-row",[r("v-col"),r("v-col"),r("v-col",[r("v-btn",{staticClass:"mr-4",attrs:{color:"primary",type:"submit",disabled:!a.validDeletar}},[a._v(" Deletar ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),r("div",{staticClass:"pt-10"},[r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{color:"#C0C0C0"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headersCarteiraVendedor,items:a.lista_de_carteira,"sort-by":"calories"},scopedSlots:a._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:""}},[r("v-toolbar-title",[a._v("CARTEIRA/VENDEDOR")])],1)]},proxy:!0}])})],1)],1)],1)],1),r("div",{staticClass:"pt-10"},[r("h2",[a._v("Ranking dos melhores vendedores")]),r("v-btn",{staticClass:"mr-4",attrs:{color:"primary",id:"botao-enviar"},on:{click:function(e){return a.downloadGraficoRankingVendedoresPNG()}}},[a._v(" Download PNG ")]),r("v-btn",{staticClass:"mr-4",attrs:{color:"primary",id:"botao-enviar"},on:{click:function(e){return a.downloadGraficoRankingVendedoresPDF()}}},[a._v(" Download PDF ")]),r("BarChart",{attrs:{lista_vendedor:this.lista_nome_vendedores,lista_score:this.lista_score_vendedores}})],1)])],1)],1)],1)],1)},s=[],o=r(7121),i=r(336),l={listar_empresas:()=>i.d.get("empresa/todas-empresas")},c=r(6455),d=r.n(c),n=r(9669),u=r.n(n),v=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("Bar",{attrs:{"chart-options":a.chartOptions,"chart-data":a.chartData,"chart-id":a.chartId,"dataset-id-key":a.datasetIdKey,plugins:a.plugins,"css-classes":a.cssClasses,styles:a.styles,width:a.width,height:a.height,lista_vendedor:this.lista_nome_vendedores,lista_score:this.lista_score_vendedores}})},p=[],_=r(7889),h=r(2728);h.kL.register(h.Dx,h.u,h.De,h.ZL,h.uw,h.f$);var f={name:"BarChart",components:{Bar:_.$Q},props:{lista_vendedor:[],lista_score:[],chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},data(a){return{loaded:!1,chartData:{labels:a.lista_vendedor,datasets:[{label:"Consumo",backgroundColor:"#f87979",data:a.lista_score}]},chartOptions:{responsive:!0,maintainAspectRatio:!1}}}},m=f,C=r(1001),b=(0,C.Z)(m,v,p,!1,null,null,null),g=b.exports,x={name:"carteira-vendedor",components:{BarChart:g},data:()=>({lista_nome_vendedores:[],lista_score_vendedores:[],regra_usuario:[a=>!!a||"O USUÁRIO é obrigatório"],regra_empresa:[a=>!!a||"A EMPRESA é obrigatório"],regra_cnpj:[a=>!!a||"O CNPJ é obrigatório"],validCadastro:!0,validPesquisa:!0,validDeletar:!0,carteira:{id:"",cnpj:""},carteira_usuario:{id:""},carteira_deletar:{cnpj:""},lista_de_usuarios:[],lista_de_empresas:[],lista_de_carteira:[],lista_de_carteira_usuario:[],headersUsuarios:[{text:"ID",align:"start",value:"id"},{text:"Nome",value:"nome"},{text:"Email",value:"email"},{text:"Tipo acesso",value:"tipoAcesso"}],headersCarteiraVendedor:[{text:"CNPJ",align:"start",value:"cnpj"},{text:"Cidade",value:"cidade.descricao"},{text:"CNAE",value:"cnae.descricao"},{text:"Origem",value:"origem"},{text:"Vendedor",value:"usuario.nome"},{text:"Acesso",value:"usuario.tipoAcesso"},{text:"Data de cadastro",value:"dataDeCadastroVendedor"}]}),async mounted(){this.loaded=!1;try{u()({url:"http://localhost:8080/usuario/ranking-vendedor/",method:"GET"}).then((a=>{Object.keys(a.data).forEach((a=>{this.lista_nome_vendedores.push(a)})),console.log(this.lista_nome_vendedores),Object.values(a.data).forEach((a=>{this.lista_score_vendedores.push(a)})),console.log(this.lista_score_vendedores),this.loaded=!0})).catch((a=>{d().fire("Oops...","Erro ao gerar o gráfico! - Erro: "+a.response.data.error,"error")}))}catch(a){console.error(a)}},methods:{downloadGraficoRankingVendedoresPNG(){u()({url:"http://127.0.0.1:5000/graph/ranking-top3/",method:"GET",responseType:"blob"}).then((a=>{var e=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=e,r.setAttribute("download","ranking-top-3.png"),document.body.appendChild(r),r.click()})).catch((a=>{d().fire("Oops...","Erro ao gerar o gráfico! - Erro: "+a.response.data.error,"error")}))},downloadGraficoRankingVendedoresPDF(){u()({url:"http://127.0.0.1:5000/graph/ranking-top3/pdf",method:"GET",responseType:"blob"}).then((a=>{var e=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=e,r.setAttribute("download","ranking-top-3.pdf"),document.body.appendChild(r),r.click()})).catch((a=>{d().fire("Oops...","Erro ao gerar o gráfico! - Erro: "+a.response.data.error,"error")}))},cadastrar_carteira(){o.Z.listar_carteira(this.carteira).then((a=>{this.lista_de_carteira_usuario=a.data.vendedor,console.log(this.lista_de_carteira_usuario.tipoAcesso),"VENDEDOR"===this.lista_de_carteira_usuario.tipoAcesso?o.Z.salvar_carteira(this.carteira).then((a=>{this.usuario={},d().fire("Sucesso","Carteira cadastrado com sucesso!!!","success"),this.exibir_usuario()})).catch((a=>{d().fire("Oops...","Erro ao cadastrar a carteira! - Erro: "+a.response.data.error,"error")})):d().fire("Oops...","O usuário informado não é um VENDEDOR!","error")}))},exibir_usuario(){o.Z.listar_usuarios().then((a=>{this.lista_de_usuarios=a.data})).catch((a=>{d().fire("Oops...","Erro ao carregar a tabela de usuários! - Erro: "+a.response.data.error,"error")}))},exibir_empresa(){l.listar_empresas().then((a=>{this.lista_de_empresas=a.data})).catch((a=>{d().fire("Oops...","Erro ao carregar a tabela de empresas! - Erro: "+a.response.data.error,"error")}))},pesquisar_carteira(){o.Z.listar_carteira(this.carteira_usuario).then((a=>{this.lista_de_carteira=a.data.clientes,console.log(this.lista_de_carteira),d().fire("Sucesso","Usuário pesquisado com sucesso!","success")})).catch((a=>{d().fire("Oops...","Erro ao carregar a tabela de empresas! - Erro: "+a.response.data.error,"error")}))},deletar_carteira(){o.Z.excluir_carteira(this.carteira_deletar).then((a=>{d().fire("Sucesso","CNPJ excluido com sucesso!!!","success")})).catch((a=>{d().fire("Oops...","Erro ao exluir o CNPJ! - Erro: "+a.response.data.error,"error")}))},validate(){this.$refs.form.validate()}}},E=x,y=r(3453),D=r.n(y),w=r(7524),k=r(680),R=r(3237),V=r(7118),O=r(2102),A=r(4228),Z=r(209),j=r(5972),N=r(6232),P=r(4470),S=r(7877),T=r(2877),q=r(5978),I=r(6656),U=r(7921),G=(0,C.Z)(E,t,s,!1,null,null,null),z=G.exports;D()(G,{VApp:w.Z,VBtn:k.Z,VCard:R.Z,VCardText:V.ZB,VCol:O.Z,VContainer:A.Z,VDataTable:Z.Z,VFlex:j.Z,VForm:N.Z,VLayout:P.Z,VMain:S.Z,VRow:T.Z,VTextField:q.Z,VToolbar:I.Z,VToolbarTitle:U.qW})}}]);
//# sourceMappingURL=114.40c3af51.js.map